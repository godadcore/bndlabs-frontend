<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Project Details — Bodunde</title>
<link rel="icon" type="image/png" href="favicon.png" />

<style>
  :root {
    --primary:#FF4D00;
    --primary-2:#FF8C00;
    --text:#0B0B0B;
    --muted:rgba(11,11,11,0.70);
    --faint:rgba(11,11,11,0.55);
    --max-width:1100px;
    --grey-bg:#f7f7f7; /* GREY alt background */
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:"SF Pro Text",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    color:var(--text);background:#fff;line-height:1.6;
  }
  a{text-decoration:none;color:inherit}
  img{max-width:100%;display:block;border-radius:18px;box-shadow:0 12px 30px rgba(0,0,0,.06)}

  /* ===== HEADER ===== */
  header{
    position:fixed;top:0;left:0;right:0;z-index:1000;
    display:flex;justify-content:space-between;align-items:center;
    background:rgba(0,0,0,0.9);backdrop-filter:blur(10px);
    color:#fff;padding:18px 36px;border-bottom:1px solid rgba(255,255,255,0.08);
  }
  .brand{display:flex;align-items:center;gap:10px}
  .brand-text .name{font-weight:700;font-size:20px}
  .logo svg{width:40px;height:40px;fill:#fff}
  .menu-toggle{display:block;background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer}
  .nav{
    display:none;flex-direction:column;align-items:flex-end;
    position:absolute;top:64px;right:20px;width:220px;
    background:rgba(20,20,20,0.92);border-radius:20px;
    padding:16px 12px;gap:10px;box-shadow:0 10px 30px rgba(0,0,0,.35);
  }
  .nav.active{display:flex}
  .nav a{
    background:rgba(255,255,255,.08);color:#fff;
    padding:12px 0;border-radius:999px;width:100%;text-align:center;
  }
  .nav a.active{background:linear-gradient(120deg,var(--primary),var(--primary-2))}

  .container{max-width:var(--max-width);margin:0 auto;padding:0 36px}
  .pad-top{padding-top:96px}

  /* ===== HERO (stays white) ===== */
  .hero{background:#fff;overflow:hidden;padding:100px 0;}
  .hero-inner{
    display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;
  }
  .hero h1{
    font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    font-size:72px;letter-spacing:-1px;margin-bottom:10px;
  }
  .hero p.lead{color:var(--muted);font-size:20px;margin-bottom:18px;max-width:540px}
  .meta{display:flex;gap:14px;color:var(--faint);font-size:14px;margin-top:8px}
  .hero-art-wrapper{display:flex;justify-content:flex-end}
  .hero-art{
    width:600px;max-width:100%;height:auto;object-fit:cover;
    border-radius:28px;box-shadow:0 18px 60px rgba(0,0,0,.1);
  }
/* ===== HERO BREAK (added) ===== */
.hero-break {
  width: 100%;
  height: 40px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.04);
  background: #fff;
}
  /* ===== SECTIONS ===== */
  section.block{
    padding:90px 0;
    border-bottom:1px solid rgba(0,0,0,0.05);
    background:#fff;
  }
  section.block.grey{background:var(--grey-bg)}
  .block h2{
    font-size:30px;margin-top:32px;margin-bottom:12px;
    font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  }
  .block p{
    color:var(--muted);
    max-width:820px;
    margin-top:10px;
  }
  .block img{margin-bottom:36px;border-radius:20px}
  .two-up{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:24px;
    margin-bottom:32px;
  }

  /* ===== UPDATED: horizontal image scroll for 3–4 images ===== */
  .img-scroll{
    display:flex;
    overflow-x:auto;
    gap:18px;
    margin-bottom:36px;
    scroll-snap-type:x mandatory;
    padding-bottom:8px;
  }
  .img-scroll img{
    flex:0 0 auto;
    width:calc(33.333% - 12px); /* show ~3 at a time */
    scroll-snap-align:start;
    transition:transform .25s ease;
  }
  .img-scroll img:hover{transform:scale(1.02);}
  .img-scroll::-webkit-scrollbar{height:6px;}
  .img-scroll::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2);border-radius:3px;}

  @media(max-width:900px){
    .hero-inner{grid-template-columns:1fr;text-align:center}
    .two-up{grid-template-columns:1fr}
    .img-scroll img{width:80%} /* large, swipeable cards on mobile */
  }

  /* ===== MORE PROJECTS ===== */
  .more-grid{
    display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:18px;margin-top:26px;
  }
  .more-item{
    background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;overflow:hidden;
    box-shadow:0 6px 18px rgba(0,0,0,.06);transition:transform .2s, box-shadow .2s;
  }
  .more-item:hover{transform:translateY(-3px);box-shadow:0 12px 28px rgba(0,0,0,.09)}
  .more-item img{height:160px;width:100%;object-fit:cover;border-radius:0}
  .more-item .p{padding:12px 14px}
  .more-item .p h3{margin:0 0 4px;font-size:18px}
  .more-item .p small{color:var(--faint)}

  /* ===== FOOTER ===== */
  /* FOOTER */
  footer{
    background:#f6f3ef;
    color:var(--light-faint);
    padding:20px;
    margin-top:40px;
  }
  .footer-inner{
    max-width:var(--max-width);
    margin:0 auto;
    display:flex;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:12px;
    text-align:center;
  }
  .footer-left{font-size:14px;}
  .footer-nav{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;}
  .footer-nav a{color:var(--light-faint);font-size:14px;text-transform:capitalize;}
  .socials{display:flex;gap:10px;align-items:center;justify-content:center;}
  .socials a{
    width:36px;height:36px;
    border-radius:999px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border:1px solid rgba(0,0,0,0.1);
  }
  .socials a svg{width:18px;height:18px;fill:#000;}
  @media(max-width:720px){
    .footer-inner{flex-direction:column;gap:10px;}
  }
  /* --- RESPONSIVE TYPOGRAPHY FIX --- */

/* Tablets (≤ 900px) */
@media (max-width: 900px) {
  .project-hero h1 {
    font-size: 34px;      /* smaller hero title */
    line-height: 1.2;
  }
  .project-hero p,
  .project-section h2,
  .project-section p,
  .section-subtitle {
    font-size: 16px;      /* reduce subtitle and body size */
  }
}

/* Phones (≤ 600px) */
@media (max-width: 600px) {
  .project-hero h1 {
    font-size: 26px;
    line-height: 1.25;
  }
  .project-hero p,
  .project-section h2,
  .project-section p,
  .section-subtitle {
    font-size: 15px;
    line-height: 1.5;
  }
}
/* === UNIVERSAL RESPONSIVE FIX === */
@media (max-width: 900px) {
  h1, .project-hero h1, .section-title {
    font-size: 2rem !important; /* ≈32px */
    line-height: 1.3 !important;
  }

  h2, .section-subtitle, .project-section h2 {
    font-size: 1.25rem !important; /* ≈20px */
  }

  p, .project-section p, .project-hero p {
    font-size: 1rem !important; /* ≈16px */
    line-height: 1.5 !important;
  }
}

@media (max-width: 600px) {
  h1, .project-hero h1, .section-title {
    font-size: 1.75rem !important; /* ≈28px */
    line-height: 1.25 !important;
  }

  h2, .section-subtitle, .project-section h2 {
    font-size: 1.1rem !important; /* ≈17–18px */
  }

  p, .project-section p, .project-hero p {
    font-size: 0.95rem !important; /* ≈15px */
    line-height: 1.5 !important;
  }
}

</style>
</head>

<body>
<header>
  <div class="brand">
    <div class="logo"><svg viewBox="0 0 24 24"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.1 3-3.1.9 0 1.8.1 2 .1v2.3h-1.1c-1 0-1.3.6-1.3 1.2v1.7h2.6l-.4 2.9h-2.2v7A10 10 0 0 0 22 12z" fill="currentColor"/></svg></div>
    <div class="brand-text"><div class="name">Bodunde</div></div>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a class="active" href="portfolio.html">Portfolio</a>
    <a href="blog.html">Blog</a>
    <a href="contact.html">Contact</a>
  </nav>
  <button class="menu-toggle" id="menuToggle">☰</button>
</header>

<main class="pad-top">
  <!-- HERO (white) -->
  <section class="hero">
    <div class="container hero-inner">
      <div>
        <h1 id="proj_title">Project Title</h1>
        <p class="lead" id="proj_desc">Project description here.</p>
        <div class="meta"><span id="proj_tag">Product Design</span><span>•</span><span id="proj_date">2025</span></div>
      </div>
      <div class="hero-art-wrapper">
        <img class="hero-art" id="proj_image" src="" alt="Project Hero">
      </div>
    </div>
    <!-- ===== BREAK (added) ===== -->
<div class="hero-break"></div>
  </section>

  <!-- DYNAMIC SECTIONS -->
  <div id="sections"></div>

  <!-- MORE PROJECTS -->
  <section class="block">
    <div class="container">
      <h2>More from my portfolio</h2>
      <div class="more-grid" id="moreGrid"></div>
    </div>
  </section>
</main>

  <footer>
    <div class="footer-inner">
      <div class="footer-left">© 2025 <strong>Bodunde</strong>. Designed & coded by Godadcore.</div>
      <div class="socials">
        <a href="#"><svg viewBox="0 0 24 24"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.1 3-3.1.9 0 1.8.1 2 .1v2.3h-1.1c-1 0-1.3.6-1.3 1.2v1.7h2.6l-.4 2.9h-2.2v7A10 10 0 0 0 22 12z"/></svg></a>
        <a href="#"><svg viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.1 1.5 4.4 4.4 0 0 0-7.5 3v1A10.7 10.7 0 0 1 3 4s-4 9 5 13a11.6 11.6 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.1-.8A7.7 7.7 0 0 0 23 3z"/></svg></a>
        <a href="#"><svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm1.3 14h-2.6v-6h2.6v6zm0-7.3h-2.6V7h2.6v1.7z"/></svg></a>
      </div>
      <nav class="footer-nav">
        <a href="About.html">About</a>
        <a href="portfolio.html">Portfolio</a>
        <a href="blog.html">Blog</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>


<script>
/* ===== MENU ===== */
document.getElementById('menuToggle').addEventListener('click',()=>{
  document.querySelector('.nav').classList.toggle('active');
});

/* ===== PROJECT DETAIL LOADER =====
   Uses the same Admin store key: 'cms_projects'
   Groups sections strictly as: image(s) -> heading -> paragraph (one block)
   UPDATED: supports up to 4 images; for 3–4 images shows a smooth horizontal scroll row. */
(function(){
  const params = new URLSearchParams(location.search);
  const id = params.get('id');

  const projects = safeParse(localStorage.getItem('cms_projects')) || [];
  if (!projects.length) {
    renderEmpty('No CMS data found. Open Admin and create a project, then reload.');
    return;
  }

  // If the URL id is missing, use the newest (index 0).
  const project = projects.find(p => String(p.id) === String(id)) || projects[0];
  if (!project) {
    renderEmpty('Project not found. Check the URL id or create a project in Admin.');
    return;
  }

  // HERO
  setText('#proj_title', project.title);
  setText('#proj_desc', project.desc);
  setText('#proj_tag', project.tag);
  setText('#proj_date', project.date);
  setSrc('#proj_image', project.hero);

  // CONTENT SECTIONS
  const secWrap = document.getElementById('sections');
  secWrap.innerHTML = '';

  const items = Array.isArray(project.sections) ? project.sections : [];
  if (!items.length) {
    const empty = document.createElement('section');
    empty.className = 'block grey';
    empty.innerHTML = `<div class="container"><div class="empty" style="text-align:center;color:var(--muted)">No sections yet.</div></div>`;
    secWrap.appendChild(empty);
  } else {
    renderBlocks(items, secWrap);
  }

  // MORE PROJECTS — Always show 3 cards (latest), excluding current
  const more = document.getElementById('moreGrid');
  more.innerHTML = '';

  const currentId = String(project.id);
  const top3 = projects.slice(0, 3);
  let pool = top3.filter(p => String(p.id) !== currentId);

  if (pool.length < 3) {
    // add from the rest
    for (let i = 3; i < projects.length && pool.length < 3; i++) {
      const p = projects[i];
      if (String(p.id) !== currentId && !pool.some(x => String(x.id) === String(p.id))) {
        pool.push(p);
      }
    }
  }

  pool = pool.slice(0, 3);

  pool.forEach(p=>{
    const a=document.createElement('a');
    a.className='more-item';
    a.href=`project-monitor.html?id=${encodeURIComponent(p.id)}`;
    a.innerHTML=`
      <img src="${escapeAttr(p.hero||'')}" alt="">
      <div class="p"><h3>${escapeHtml(p.title||'')}</h3><small>${escapeHtml(p.tag||'')}</small></div>
    `;
    more.appendChild(a);
  });

  /* ======= Block Renderer (image-first) ======= */
  function renderBlocks(items, host){
    let i = 0, grey = false;
    while (i < items.length) {
      let imgs = [];
      let h2 = '';
      let p = '';

      // CASE A: start with img(s)  — UPDATED: up to 4 images
      if (items[i]?.type === 'img') {
        while (i < items.length && items[i].type === 'img' && imgs.length < 4) { // UPDATED (2 -> 4)
          imgs.push(items[i].value || '');
          i++;
        }
        if (i < items.length && items[i].type === 'h2') { h2 = items[i].value || ''; i++; }
        if (i < items.length && items[i].type === 'p')  { p  = items[i].value || ''; i++; }
      }
      // CASE B: start with h2/p — still render image(s) first by looking ahead
      else if (items[i]?.type === 'h2' || items[i]?.type === 'p') {
        if (items[i]?.type === 'h2') { h2 = items[i].value || ''; i++; }
        if (i < items.length && items[i].type === 'p') { p = items[i].value || ''; i++; }
        let k = i;
        while (k < items.length && items[k].type === 'img' && imgs.length < 4) { // UPDATED (2 -> 4)
          imgs.push(items[k].value || '');
          k++;
        }
        if (imgs.length) i = k;
      } else {
        i++; // unknown type
        continue;
      }

      if (!imgs.length && !h2 && !p) continue;

      const section = document.createElement('section');
      section.className = 'block' + (grey ? ' grey' : '');
      grey = !grey;

      // UPDATED: choose layout
      let imgsHTML = '';
      if (imgs.length === 1) {
        imgsHTML = `<img src="${escapeAttr(imgs[0])}" alt="">`;
      } else if (imgs.length === 2) {
        imgsHTML = `<div class="two-up">
          <img src="${escapeAttr(imgs[0])}" alt=""> 
          <img src="${escapeAttr(imgs[1])}" alt="">
        </div>`;
      } else if (imgs.length >= 3) { // 3–4 images → horizontal scroll strip
        imgsHTML = `<div class="img-scroll">
          ${imgs.map(src=>`<img src="${escapeAttr(src)}" alt="">`).join('')}
        </div>`;
      }

      section.innerHTML = `
        <div class="container">
          ${imgsHTML}
          ${h2 ? `<h2>${escapeHtml(h2)}</h2>` : ''}
          ${p ? `<p>${escapeHtml(p)}</p>` : ''}
        </div>
      `;
      host.appendChild(section);
    }
  }

  /* ===== Helpers ===== */
  function renderEmpty(msg){
    const secWrap = document.getElementById('sections');
    secWrap.innerHTML = `<section class="block grey"><div class="container"><div class="empty" style="text-align:center;color:var(--muted)">${escapeHtml(msg)}</div></div></section>`;
  }

  function setText(sel, val){ const el = document.querySelector(sel); if (el) el.textContent = val || ''; }
  function setSrc(sel, val){ const el = document.querySelector(sel); if (el) el.src = val || ''; }
  function escapeHtml(s){ return String(s||'').replace(/[&<>]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[c])); }
  function escapeAttr(s){ return String(s||'').replace(/"/g,'&quot;'); }
  function safeParse(json){ try{ return JSON.parse(json||''); } catch(e){ return null; } }
})();
</script>
</body>
</html>
