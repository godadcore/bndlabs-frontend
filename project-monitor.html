<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Project Details — Bodunde</title>
<link rel="icon" type="image/png" href="favicon.png" />

<style>
  :root {
    --primary:#FF4D00;
    --primary-2:#FF8C00;
    --text:#0B0B0B;
    --muted:rgba(11,11,11,0.70);
    --faint:rgba(11,11,11,0.55);
    --max-width:1100px;
    --grey-bg:#f7f7f7; /* GREY, not gray :) */
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:"SF Pro Text",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    color:var(--text);background:#fff;line-height:1.6;
  }
  a{text-decoration:none;color:inherit}
  img{max-width:100%;display:block;border-radius:18px;box-shadow:0 12px 30px rgba(0,0,0,.06)}

  /* ===== HEADER ===== */
  header{
    position:fixed;top:0;left:0;right:0;z-index:1000;
    display:flex;justify-content:space-between;align-items:center;
    background:rgba(0,0,0,0.9);backdrop-filter:blur(10px);
    color:#fff;padding:18px 36px;border-bottom:1px solid rgba(255,255,255,0.08);
  }
  .brand{display:flex;align-items:center;gap:10px}
  .brand-text .name{font-weight:700;font-size:20px}
  .logo svg{width:40px;height:40px;fill:#fff}
  .menu-toggle{display:block;background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer}
  .nav{
    display:none;flex-direction:column;align-items:flex-end;
    position:absolute;top:64px;right:20px;width:220px;
    background:rgba(20,20,20,0.92);border-radius:20px;
    padding:16px 12px;gap:10px;box-shadow:0 10px 30px rgba(0,0,0,.35);
  }
  .nav.active{display:flex}
  .nav a{
    background:rgba(255,255,255,.08);color:#fff;
    padding:12px 0;border-radius:999px;width:100%;text-align:center;
  }
  .nav a.active{background:linear-gradient(120deg,var(--primary),var(--primary-2))}

  .container{max-width:var(--max-width);margin:0 auto;padding:0 36px}
  .pad-top{padding-top:96px}

  /* ===== HERO ===== (white) */
  .hero{
    background:#fff;overflow:hidden;padding:100px 0;
  }
  .hero-inner{
    display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;
  }
  .hero h1{
    font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    font-size:72px;letter-spacing:-1px;margin-bottom:10px;
  }
  .hero p.lead{color:var(--muted);font-size:20px;margin-bottom:18px;max-width:540px}
  .meta{display:flex;gap:14px;color:var(--faint);font-size:14px;margin-top:8px}
  .hero-art-wrapper{display:flex;justify-content:flex-end}
  .hero-art{
    width:600px;max-width:100%;height:auto;object-fit:cover;
    border-radius:28px;box-shadow:0 18px 60px rgba(0,0,0,.1);
  }

  /* ===== SECTIONS ===== */
  section.block{
    padding:90px 0;
    border-bottom:1px solid rgba(0,0,0,0.05);
    background:#fff;
  }
  section.block.grey{background:var(--grey-bg)}
  .block h2{
    font-size:30px;margin-top:32px;margin-bottom:12px;
    font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  }
  .block p{
    color:var(--muted);
    max-width:820px;
    margin-top:10px;
  }
  .block img{margin-bottom:36px;border-radius:20px}
  .two-up{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:24px;
    margin-bottom:32px;
  }

  @media(max-width:900px){
    .hero-inner{grid-template-columns:1fr;text-align:center}
    .two-up{grid-template-columns:1fr}
  }

  /* ===== MORE PROJECTS ===== */
  .more-grid{
    display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:18px;margin-top:26px;
  }
  .more-item{
    background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;overflow:hidden;
    box-shadow:0 6px 18px rgba(0,0,0,.06);transition:transform .2s, box-shadow .2s;
  }
  .more-item:hover{transform:translateY(-3px);box-shadow:0 12px 28px rgba(0,0,0,.09)}
  .more-item img{height:160px;width:100%;object-fit:cover;border-radius:0}
  .more-item .p{padding:12px 14px}
  .more-item .p h3{margin:0 0 4px;font-size:18px}
  .more-item .p small{color:var(--faint)}

  /* ===== FOOTER ===== */
  footer{
    background:#f6f3ef;color:var(--faint);padding:20px;margin-top:40px;
  }
  .footer-inner{
    max-width:var(--max-width);margin:0 auto;
    display:flex;align-items:center;justify-content:space-between;
    flex-wrap:wrap;gap:12px;text-align:center;padding:0 36px;
  }
  .socials{display:flex;gap:10px}
  .socials a svg{width:18px;height:18px;fill:#000}
</style>
</head>

<body>
<header>
  <div class="brand">
    <div class="logo"><svg viewBox="0 0 24 24"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.1 3-3.1.9 0 1.8.1 2 .1v2.3h-1.1c-1 0-1.3.6-1.3 1.2v1.7h2.6l-.4 2.9h-2.2v7A10 10 0 0 0 22 12z" fill="currentColor"/></svg></div>
    <div class="brand-text"><div class="name">Bodunde</div></div>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a class="active" href="portfolio.html">Portfolio</a>
    <a href="blog.html">Blog</a>
    <a href="contact.html">Contact</a>
  </nav>
  <button class="menu-toggle" id="menuToggle">☰</button>
</header>

<main class="pad-top">
  <!-- HERO (white) -->
  <section class="hero">
    <div class="container hero-inner">
      <div>
        <h1 id="proj_title">Project Title</h1>
        <p class="lead" id="proj_desc">Project description here.</p>
        <div class="meta"><span id="proj_tag">Product Design</span><span>•</span><span id="proj_date">2025</span></div>
      </div>
      <div class="hero-art-wrapper">
        <img class="hero-art" id="proj_image" src="" alt="Project Hero">
      </div>
    </div>
  </section>

  <!-- DYNAMIC SECTIONS -->
  <div id="sections"></div>

  <!-- MORE PROJECTS -->
  <section class="block">
    <div class="container">
      <h2>More from my portfolio</h2>
      <div class="more-grid" id="moreGrid"></div>
    </div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <div>© 2025 <strong>Bodunde</strong>. Designed & coded with ❤️ in Lagos.</div>
    <div class="socials">
      <a href="#"><svg viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.1 1.5 4.4 4.4 0 0 0-7.5 3v1A10.7 10.7 0 0 1 3 4s-4 9 5 13a11.6 11.6 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.1-.8A7.7 7.7 0 0 0 23 3z"/></svg></a>
    </div>
  </div>
</footer>

<script>
/* ===== MENU ===== */
document.getElementById('menuToggle').addEventListener('click',()=>{
  document.querySelector('.nav').classList.toggle('active');
});

/* ===== CMS PROJECT DETAIL LOADER =====
   Robust grouping: img(s) -> h2 -> p in SAME section block.
   Accepts 0–2 images, and is resilient if CMS sends h2/p first. */
(function(){
  const params = new URLSearchParams(location.search);
  const id = params.get('id');
  const projects = safeParse(localStorage.getItem('cms_projects')) || [];
  const project = projects.find(p => String(p.id) === String(id)) || projects[0];
  if(!project) return;

  // HERO
  setText('proj_title', project.title);
  setText('proj_desc', project.desc);
  setText('proj_tag', project.tag);
  setText('proj_date', project.date);
  setSrc('proj_image', project.hero);

  // SECTIONS
  const secWrap = document.getElementById('sections');
  secWrap.innerHTML = '';

  const items = Array.isArray(project.sections) ? project.sections : [];
  let i = 0, greyToggle = false;

  while (i < items.length) {
    let imgs = [];
    let heading = '';
    let para = '';

    const cur = items[i] || {};

    // Prefer image-first: collect up to 2 leading images
    if (cur.type === 'img') {
      while (i < items.length && items[i].type === 'img' && imgs.length < 2) {
        pushImg(items[i]); i++;
      }
      // then collect one heading, then one paragraph (if present)
      if (i < items.length && items[i].type === 'h2') { heading = items[i].value || ''; i++; }
      if (i < items.length && items[i].type === 'p')  { para    = items[i].value || ''; i++; }
    } else if (cur.type === 'h2' || cur.type === 'p') {
      // If CMS sends heading/para first, collect them, then optional images right after
      if (cur.type === 'h2') { heading = cur.value || ''; i++; }
      if (i < items.length && items[i].type === 'p')  { para    = items[i].value || ''; i++; }
      while (i < items.length && items[i].type === 'img' && imgs.length < 2) {
        pushImg(items[i]); i++;
      }
    } else {
      // Unknown item, skip to avoid infinite loop
      i++;
      continue;
    }

    // If absolutely nothing gathered (shouldn’t happen), skip
    if (!heading && !para && imgs.length === 0) continue;

    // Build the section block
    const section = document.createElement('section');
    section.className = 'block' + (greyToggle ? ' grey' : '');

    let imgsHTML = '';
    if (imgs.length === 2) {
      imgsHTML = `<div class="two-up">
        <img src="${escapeAttr(imgs[0])}" alt="">
        <img src="${escapeAttr(imgs[1])}" alt="">
      </div>`;
    } else if (imgs.length === 1) {
      imgsHTML = `<img src="${escapeAttr(imgs[0])}" alt="">`;
    }

    section.innerHTML = `
      <div class="container">
        ${imgsHTML}
        ${heading ? `<h2>${escapeHtml(heading)}</h2>` : ''}
        ${para ? `<p>${escapeHtml(para)}</p>` : ''}
      </div>
    `;

    secWrap.appendChild(section);
    greyToggle = !greyToggle; // alternate white / grey
  }

  // MORE PROJECTS
  const more = document.getElementById('moreGrid');
  const others = projects.filter(p => String(p.id) !== String(project.id)).slice(0,3);
  others.forEach(p => {
    const a = document.createElement('a');
    a.className = 'more-item';
    a.href = `project-monitor.html?id=${encodeURIComponent(p.id)}`;
    a.innerHTML = `
      <img src="${escapeAttr(p.hero || '')}" alt="">
      <div class="p"><h3>${escapeHtml(p.title || '')}</h3><small>${escapeHtml(p.tag || '')}</small></div>
    `;
    more.appendChild(a);
  });

  /* ===== Helpers ===== */
  function pushImg(node){ const v = (node && node.value) ? String(node.value) : ''; if (v) imgs.push(v); }
  function setText(id, val){ const el = document.getElementById(id); if(el) el.textContent = val || ''; }
  function setSrc(id, val){ const el = document.getElementById(id); if(el) el.src = val || ''; }
  function escapeHtml(s){ return String(s||'').replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c])); }
  function escapeAttr(s){ return String(s||'').replace(/"/g,'&quot;'); }
  function safeParse(json){ try{ return JSON.parse(json||''); } catch(e){ return null; } }
})();
</script>
</body>
</html>
