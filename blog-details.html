<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Blog Post — Bodunde</title>
<link rel="icon" type="image/png" href="favicon.png" />
<style>
  :root {
    --primary:#FF4D00;
    --primary-2:#FF8C00;
    --text:#0B0B0B;
    --muted:rgba(11,11,11,0.7);
    --faint:rgba(11,11,11,0.55);
    --grey-bg:#f7f7f7;
    --max-width:900px;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:"SF Pro Text",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    background:#fff;color:var(--text);line-height:1.6;
  }
  img{max-width:100%;border-radius:12px;display:block}
  a{text-decoration:none;color:inherit}

  header{
    position:fixed;top:0;left:0;right:0;z-index:100;
    background:rgba(0,0,0,0.9);backdrop-filter:blur(10px);
    color:#fff;display:flex;justify-content:space-between;align-items:center;
    padding:18px 36px;border-bottom:1px solid rgba(255,255,255,0.08);
  }
  header .brand{display:flex;align-items:center;gap:10px}
  header .brand-text{font-weight:700;font-size:20px}
  .nav{display:flex;gap:20px}
  .nav a{color:#fff;opacity:0.8}
  .nav a.active,.nav a:hover{opacity:1;color:var(--primary)}

  main{max-width:var(--max-width);margin:0 auto;padding:120px 24px 80px}

  .post-header{text-align:left;margin-bottom:40px}
  .post-header h1{
    font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    font-size:42px;font-weight:700;margin-bottom:12px;
  }
  .post-header .meta{
    display:flex;align-items:center;flex-wrap:wrap;
    gap:12px;font-size:15px;color:var(--faint);
  }
  .meta .author{
    display:flex;align-items:center;gap:8px;
  }
  .meta .author img{
    width:36px;height:36px;border-radius:50%;object-fit:cover;
    border:2px solid rgba(0,0,0,0.05);
  }
  .post-body p{margin-bottom:18px;color:var(--muted)}
  .post-body h2{margin-top:36px;margin-bottom:12px;font-size:24px;font-weight:600}
  .post-body img{margin:28px 0;border-radius:16px}
  blockquote{border-left:4px solid rgba(0,0,0,.1);margin:20px 0;padding:10px 16px;color:var(--muted);font-style:italic}

  section.recent{margin-top:80px;border-top:1px solid rgba(0,0,0,.08);padding-top:40px}
  section.recent h3{margin-bottom:20px;font-size:22px;font-weight:600}
  .recent-list{display:grid;gap:16px}
  .recent-item{
    border:1px solid rgba(0,0,0,0.06);
    border-radius:10px;padding:14px 18px;
    box-shadow:0 6px 16px rgba(0,0,0,0.04);
    transition:transform .2s ease,box-shadow .2s ease;
  }
  .recent-item:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.07);}
  .recent-item h4{margin:0 0 6px;font-size:18px;color:var(--text);}
  .recent-item small{color:var(--faint);}

  footer{
    background:#f6f3ef;color:var(--faint);
    padding:20px;margin-top:60px;text-align:center;
  }
</style>
</head>

<body>
<header>
  <div class="brand">
    <div class="brand-text">Bodunde</div>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="portfolio.html">Portfolio</a>
    <a class="active" href="blog.html">Blog</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<main>
  <div class="post-header">
    <h1 id="post_title">Post Title</h1>
    <p id="post_desc" style="color:var(--muted);max-width:720px;margin-bottom:10px;">Short description here.</p>
    <div class="meta">
      <div class="author">
        <img id="author_img" src="" alt="Author" />
        <span id="author_name">Author Name</span>
      </div>
      <span>•</span><span id="post_date">2025</span>
      <span>•</span><span id="post_tag">Design</span>
    </div>
  </div>

  <div id="article_body" class="post-body"></div>

  <section class="recent">
    <h3>Recent Articles</h3>
    <div id="recent_list" class="recent-list"></div>
  </section>
</main>

<footer>
  © 2025 <strong>Bodunde</strong>. Designed & coded with ❤️ in Lagos.
</footer>

<script>
(function(){
  const params = new URLSearchParams(location.search);
  const id = params.get('id');
  const blogs = safeParse(localStorage.getItem('cms_blogs')) || [];
  const profile = safeParse(localStorage.getItem('cms_profile')) || {};

  const post = blogs.find(p => String(p.id) === String(id)) || blogs[0];
  if(!post){
    document.getElementById('article_body').innerHTML =
      '<p style="text-align:center;color:var(--muted)">No post found.</p>';
    return;
  }

  // Populate header
  setText('#post_title', post.title);
  setText('#post_desc', post.desc);
  setText('#post_date', post.date);
  setText('#post_tag', post.tag);
  setText('#author_name', profile.name || 'Admin');
  setSrc('#author_img', profile.avatar && profile.avatar.trim() !== '' ? profile.avatar : 'default-avatar.png');

  // Render post body
  const body = document.getElementById('article_body');
  const items = Array.isArray(post.sections) ? post.sections : [];

  function decodeHTML(str){
    const t=document.createElement('textarea');
    t.innerHTML=String(str||'');
    return t.value;
  }

  items.forEach(s=>{
    if(s.type==='p'){
      const p=document.createElement('p');
      p.innerHTML=decodeHTML(s.value);
      body.appendChild(p);
    } else if(s.type==='h2'){
      const h=document.createElement('h2');
      h.innerHTML=decodeHTML(s.value);
      body.appendChild(h);
    } else if(s.type==='img'){
      const img=document.createElement('img');
      img.src=s.value||''; img.alt=s.alt||'';
      body.appendChild(img);
    } else if(s.type==='quote'){
      const q=document.createElement('blockquote');
      q.innerHTML=decodeHTML(s.value);
      body.appendChild(q);
    }
  });

  // Recent posts (excluding current)
  const recentWrap=document.getElementById('recent_list');
  const recent=blogs.filter(p=>String(p.id)!==String(post.id)).slice(0,3);
  recent.forEach(p=>{
    const a=document.createElement('a');
    a.className='recent-item';
    a.href=`blog-details.html?id=${encodeURIComponent(p.id)}`;
    a.innerHTML=`<h4>${escapeHtml(p.title||'')}</h4><small>${escapeHtml(p.tag||'')}</small>`;
    recentWrap.appendChild(a);
  });

  // Helpers
  function safeParse(j){try{return JSON.parse(j||'');}catch{return null;}}
  function setText(sel,val){const el=document.querySelector(sel);if(el)el.textContent=val||'';}
  function setSrc(sel,val){const el=document.querySelector(sel);if(el)el.src=val||'';}
  function escapeHtml(s){return String(s||'').replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]));}
})();
</script>
</body>
</html>
