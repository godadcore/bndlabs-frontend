<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Page Not Found | bndlabs</title>
<meta name="description" content="Oops! The page you’re looking for doesn’t exist. Explore some of bndlabs’s latest work instead.">
<link rel="canonical" href="https://bndlabs.com/404">

<!-- Favicon + PWA (correct path) -->
<link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
<link rel="apple-touch-icon" href="assets/images/favicon.svg">
<meta name="theme-color" content="#FF4D00">

<style>
:root {
  --primary:#FF4D00;
  --primary-2:#FF8C00;
  --primary-gradient:linear-gradient(120deg,#FF4D00,#FF8C00);
  --light-bg:#FFFFFF;
  --light-text:#0B0B0B;
  --muted:rgba(11,11,11,0.65);
  --faint:rgba(11,11,11,0.55);
  --max-width:1100px;
  --radius:16px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:"SF Pro Text",-apple-system,BlinkMacSystemFont,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  background:#fff;color:var(--light-text);
  -webkit-font-smoothing:antialiased;line-height:1.6;
  padding-top:80px;
}

/* ===== HEADER ===== */
header{
  height:64px;display:flex;align-items:center;justify-content:space-between;
  position:fixed;top:0;left:0;right:0;z-index:2000;
  background:rgba(0,0,0,0.92);backdrop-filter:blur(10px);
  color:#fff;padding:12px 24px;border-bottom:1px solid rgba(255,255,255,0.06);
}
.brand{display:flex;align-items:center;gap:10px}
.brand .name{font-weight:700;font-size:18px;color:#fff}
.logo svg{width:36px;height:36px;fill:currentColor}
.nav{display:none;}
.nav.active{
  display:flex;flex-direction:column;align-items:flex-end;
  position:absolute;top:64px;right:16px;width:220px;
  background:rgba(20,20,20,0.92);backdrop-filter:blur(10px);
  border-radius:20px;padding:12px 10px;gap:10px;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.nav a{
  background:rgba(255,255,255,.08);
  color:#fff;
  padding:12px 0;
  border-radius:999px;
  width:100%;
  text-align:center;
  font-weight:500;
  transition:.2s;
  text-decoration:none;
}
.nav a:hover{background:rgba(255,255,255,.18);transform:translateY(-1px)}
.nav a.active{background:var(--primary-gradient);color:#fff;font-weight:700}
.menu-toggle{display:block;background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer}

/* ===== 404 HERO ===== */
.error-wrap{
  max-width:var(--max-width);
  margin:0 auto;
  padding:40px 20px 20px;
  display:grid;grid-template-columns:1.1fr .9fr;
  align-items:center;gap:30px;
}
@media(max-width:980px){ .error-wrap{grid-template-columns:1fr;text-align:center} }

.error-text h1{font-size:60px;font-weight:900;margin:0}
.error-text p{color:var(--muted);margin:10px 0 16px;max-width:520px}
@media(max-width:980px){ .error-text p{margin-left:auto;margin-right:auto} }

.error-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:18px}
@media(max-width:980px){ .error-actions{justify-content:center} }
.btn{
  border:none;border-radius:10px;padding:10px 18px;
  font-weight:700;cursor:pointer;transition:.2s;
}
.btn.green{background:#0a8f33;color:#fff}
.btn.red{background:#c0392b;color:#fff}
.btn.gray{background:#ddd;color:#777;cursor:not-allowed}
.btn:hover{transform:translateY(-2px);opacity:.9}

.error-image img{
  width:100%;height:auto;border-radius:16px;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
}

/* ===== LATEST WORK ===== */
.latest-wrap{
  background:#faf9f7;border-top:1px solid rgba(0,0,0,.06);
  margin-top:20px;
}
.latest-inner{
  max-width:var(--max-width);margin:0 auto;padding:26px 20px 36px;
}
.latest-title{
  text-align:center;margin:0 0 16px;
  font-weight:900;letter-spacing:.12em;color:var(--faint);font-size:12px;
}
.work-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:18px;
}
.work-card{
  display:block;background:#fff;border:1px solid rgba(0,0,0,.08);
  border-radius:14px;overflow:hidden;text-decoration:none;color:inherit;
  box-shadow:0 6px 18px rgba(0,0,0,.06);transition:.2s;
}
.work-card:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 28px rgba(255,77,0,.18);
}
.work-card img{width:100%;height:160px;object-fit:cover}
.work-card .p{padding:12px 14px}
.work-card h3{margin:0 0 4px;font-size:18px}
.work-card small{color:var(--faint)}

/* ===== FOOTER ===== */
footer{
  background:#f6f3ef;
  color:var(--light-faint);
  padding:20px;
  margin-top:40px;
}
.footer-inner{
  max-width:var(--max-width);
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:12px;
  text-align:center;
}
.footer-left{font-size:14px;}
.footer-nav{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;}
.footer-nav a{color:var(--light-faint);font-size:14px;text-transform:capitalize;}
.socials{display:flex;gap:10px;align-items:center;justify-content:center;}
.socials a{
  width:36px;height:36px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:1px solid rgba(0,0,0,0.1);
}
.socials a svg{width:18px;height:18px;fill:#000;}
@media(max-width:720px){
  .footer-inner{flex-direction:column;gap:10px;}
}
</style>
</head>

<!-- important: identify page for render.js compatibility -->
<body data-page="four">
<header>
  <div class="brand">
    <div class="logo" aria-hidden="true">
      <!-- header logo (protected SVG) -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.1 3-3.1.9 0 1.8.1 2 .1v2.3h-1.1c-1 0-1.3.6-1.3 1.2v1.7h2.6l-.4 2.9h-2.2v7A10 10 0 0 0 22 12z" /></svg>
    </div>
    <div class="brand-text"><div class="name">bndlabs</div></div>
  </div>

  <nav class="nav" aria-label="Main">
    <a href="home.html">Home</a>
    <a href="about.html">About</a>
    <a href="portfolio.html">Portfolio</a>
    <a href="blog.html">Blog</a>
    <a href="contact.html">Contact</a>
  </nav>

  <button class="menu-toggle" id="menuToggle" aria-label="Menu">☰</button>
</header>

<main>
  <section class="error-wrap">
    <div class="error-text">
      <!-- static defaults (safe baseline) -->
      <h1 id="err_title">Hmmm...</h1>
      <p id="err_line1">Occurred, a 404 error has. I sense much fear in you.</p>
      <p id="err_line2">Trust in the force, clear your mind, unlearn what you have learned, and find your missing page you will.</p>
      <div class="error-actions">
        <button class="btn green" id="btn_do">Do</button>
        <button class="btn red" id="btn_donot">Do not</button>
        <button class="btn gray" id="btn_try" disabled>Try</button>
      </div>
    </div>

    <div class="error-image">
      <img id="err_img" src="https://www.adhamdannaway.com/wp-content/themes/dannaway/images/yoda2.jpg" alt="Yoda with lightsaber jumping out of iMac" />
    </div>
  </section>

  <section class="latest-wrap">
    <div class="latest-inner">
      <div class="latest-title" id="latest_title">SOME OF MY LATEST WORK</div>
      <div class="work-grid" id="latest_grid">
        <!-- projects will be injected here -->
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <div class="footer-left">© 2025 <strong>bndlabs</strong>. Designed & coded by Godadcore.</div>
    <div class="socials" id="site_socials">
      <!-- static footer icons (protected SVGs) -->
      <a href="https://www.linkedin.com/in/bodundeemmanuel" target="_blank" rel="noopener" aria-label="LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5A2.5 2.5 0 112.5 6a2.5 2.5 0 012.48-2.5zM3 8h4v13H3zM9 8h3.8v1.8h.05A4.2 4.2 0 0117 8.1c3.2 0 3.8 2.1 3.8 4.9V21h-4v-7c0-1.7-.03-3.9-2.4-3.9-2.4 0-2.7 1.8-2.7 3.8V21H9z"/></svg>
      </a>
      <a href="https://x.com/whoisemmavibe" target="_blank" rel="noopener" aria-label="X">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.36 2H21l-6.8 7.74L22 22h-4.78l-5.38-7.02L6.6 22H3l7.19-8.18L2 2h4.85l4.9 6.44L18.36 2zM8.55 4.28H6.92l8.59 11.3h1.66L8.55 4.28z"/></svg>
      </a>
      <a href="https://www.instagram.com/whoisemmavibe_" target="_blank" rel="noopener" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7zm10 2c1.7 0 3 1.3 3 3v10c0 1.7-1.3 3-3 3H7c-1.7 0-3-1.3-3-3V7c0-1.7 1.3-3 3-3h10zm-5 3.8A5.2 5.2 0 1017.2 13 5.2 5.2 0 0012 7.8zm0 8.6A3.4 3.4 0 1115.4 13 3.4 3.4 0 0112 16.4zM17.5 6a1 1 0 101 1 1 1 0 00-1-1z"/></svg>
      </a>
    </div>

    <nav class="footer-nav">
      <a href="about.html">About</a>
      <a href="portfolio.html">Portfolio</a>
      <a href="blog.html">Blog</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</footer>

<script>
/* ===== small UI helpers ===== */
const menuToggle = document.getElementById('menuToggle');
const nav = document.querySelector('.nav');
menuToggle.addEventListener('click', ()=>nav.classList.toggle('active'));
document.addEventListener('click', e=>{
  if(!nav.contains(e.target) && !menuToggle.contains(e.target)) nav.classList.remove('active');
});

/* ===== Safe 404 + Projects loader (option C: static defaults + dynamic latest projects) ===== */
(async function init404(){
  // static defaults (already in DOM) — will be overwritten if API returns valid values
  const defaults = {
    title: document.getElementById('err_title').textContent,
    line1: document.getElementById('err_line1').textContent,
    line2: document.getElementById('err_line2').textContent,
    image: document.getElementById('err_img').src,
    btn_do_label: document.getElementById('btn_do').textContent,
    btn_donot_label: document.getElementById('btn_donot').textContent,
    btn_try_label: document.getElementById('btn_try').textContent,
    btn_do_link: 'home.html',
    btn_donot_link: 'home.html',
    try_disabled: true,
    use_latest: true,
    latest_count: 3,
    custom_projects: []
  };

  // safe writer
  const apply404 = (d) => {
    if(!d) d = {};
    if(d.title) document.getElementById('err_title').textContent = d.title;
    if(d.line1) document.getElementById('err_line1').textContent = d.line1;
    if(d.line2) document.getElementById('err_line2').textContent = d.line2;
    if(d.image) document.getElementById('err_img').src = d.image;
    if(d.btn_do_label) document.getElementById('btn_do').textContent = d.btn_do_label;
    if(d.btn_donot_label) document.getElementById('btn_donot').textContent = d.btn_donot_label;
    if(d.btn_try_label) document.getElementById('btn_try').textContent = d.btn_try_label;
    const btnTry = document.getElementById('btn_try');
    btnTry.disabled = !!d.try_disabled;
    // wire buttons
    document.getElementById('btn_do').onclick = () => window.location.href = (d.btn_do_link || 'home.html');
    document.getElementById('btn_donot').onclick = () => window.location.href = (d.btn_donot_link || 'home.html');
    document.getElementById('btn_try').onclick = () => {
      if(d.btn_try_link) window.location.href = d.btn_try_link;
      else window.location.href = 'home.html';
    };
  };

  // Attempt to fetch /api/404 (backend). If it fails, fallback to localStorage or defaults.
  let cms404 = null;
  try {
    const resp = await fetch('https://bndlabs-backend.onrender.com/api/404', { credentials: 'omit' });
    if(resp.ok) {
      const json = await resp.json();
      if(json && typeof json === 'object') cms404 = json;
    }
  } catch (err) {
    // ignore network errors - we'll use fallback
    console.warn('Could not fetch /api/404:', err && err.message ? err.message : err);
  }

  // fallback: localStorage stored cms_404 (stringified object)
  if(!cms404) {
    try {
      const raw = localStorage.getItem('cms_404') || '{}';
      cms404 = JSON.parse(raw || '{}');
    } catch(e) {
      cms404 = {};
    }
  }

  // apply the resolved config (merge with defaults)
  apply404(Object.assign({}, defaults, cms404));

  // --- Projects: try backend -> fallback to localStorage -> final fallback none ---
  let projects = [];
  try {
    const r = await fetch('https://bndlabs-backend.onrender.com/api/projects', { credentials: 'omit' });
    if(r.ok) projects = await r.json();
  } catch(e){ /* ignore */ }

  if(!Array.isArray(projects) || !projects.length) {
    try {
      projects = JSON.parse(localStorage.getItem('cms_projects') || '[]');
    } catch(e) {
      projects = [];
    }
  }
  // normalize project list to recent-first
  if(Array.isArray(projects)) {
    projects.sort((a,b)=> (b.updated||0) - (a.updated||0));
  } else {
    projects = [];
  }

  const grid = document.getElementById('latest_grid');
  const cfg = Object.assign({}, defaults, cms404 || {});
  let showProjects = [];

  if(cfg.use_latest) {
    const n = Math.max(1, Number(cfg.latest_count||3));
    showProjects = (projects || []).slice(0, n);
  } else if(Array.isArray(cfg.custom_projects) && cfg.custom_projects.length) {
    showProjects = (projects || []).filter(p => cfg.custom_projects.includes(p.id));
  } else {
    showProjects = (projects || []).slice(0, 3);
  }

  // render
  grid.innerHTML = showProjects.map(p => {
    const href = p.link || ('portfolio-details.html?id=' + encodeURIComponent(p.id||''));
    const hero = p.hero || p.image || '';
    return `<a class="work-card" href="${escapeHtmlAttr(href)}">
      <img loading="lazy" src="${escapeHtmlAttr(hero)}" alt="${escapeHtmlAttr(p.title||'')}" />
      <div class="p"><h3>${escapeHtml(p.title || '')}</h3><small>${escapeHtml(p.tag || '')}</small></div>
    </a>`;
  }).join('');

})(); // end init404

/* small escaping helpers */
function escapeHtml(s){
  if(s == null) return '';
  return String(s)
    .replace(/&/g,'&amp;')
    .replace(/</g,'&lt;')
    .replace(/>/g,'&gt;')
    .replace(/"/g,'&quot;')
    .replace(/'/g,'&#39;');
}
function escapeHtmlAttr(s){
  return escapeHtml(s);
}
</script>

<!-- CORE SCRIPTS (these were corrected) -->
<script src="js/data.js"></script>
<script src="js/render.js"></script>

<!-- Clean URLs injection (fixed startsWith) -->
<script>
(function(){
  const MARKER = '/*__CLEAN_URLS_INJECTED__*/';
  if (window.__CLEAN_URLS_INJECTED) return;
  window.__CLEAN_URLS_INJECTED = true;

  document.addEventListener("DOMContentLoaded", () => {
    try {
      const links = document.querySelectorAll("a[href]");
      links.forEach(link => {
        let href = link.getAttribute("href");
        if (!href) return;
        if (/^(https?:|\/\/|#|mailto:|javascript:)/i.test(href)) return;
        if (href.match(/\.html?$|\/index\.html?$/i)) {
          const parts = href.split(/(#|\?)/);
          const main = parts[0].replace(/index\.html?$/i, '').replace(/\.html?$/i, '');
          const tail = parts.slice(1).join('');
          let clean = main || '/';
          if (!clean.startsWith('/')) clean = '/' + clean;
          if (tail) clean += tail;
          link.setAttribute('href', clean);
        }
      });
    } catch (err) {
      console.warn('Clean URL script error:', err);
    }
  });
})();
 /*__CLEAN_URLS_INJECTED__*/ 
</script>

<!-- Watch + enforce clean URLs (defensive) -->
<script>
setTimeout(() => {
    function forceCleanLinks() {
        const links = document.querySelectorAll("a[href]");
        links.forEach(link => {
            let href = link.getAttribute("href");
            if (!href) return;
            href = String(href);
            // skip external except your domain
            if (/^(https?:\/\/)/i.test(href)) {
                if (!href.includes("bndlabs-frontend.onrender.com")) return;
            }
            href = href.replace("https://bndlabs-frontend.onrender.com", "");
            href = href.replace("http://bndlabs-frontend.onrender.com", "");
            if (/^(#|mailto:|javascript:)/i.test(href)) return;
            if (href.match(/\.html?$|\/index\.html?$/i)) {
                const parts = href.split(/(#|\?)/);
                const main = parts[0].replace(/index\.html?$/i, "").replace(/\.html?$/i, "");
                const tail = parts.slice(1).join("");
                let clean = main || "/";
                clean = String(clean);
                if (!clean.startsWith("/")) clean = "/" + clean;
                if (tail) clean += tail;
                link.setAttribute("href", clean);
            }
        });
    }
    forceCleanLinks();
    const obs = new MutationObserver(forceCleanLinks);
    obs.observe(document.body, { childList: true, subtree: true });
}, 300);
</script>
</body>
</html>
